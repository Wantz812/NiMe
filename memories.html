<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XatirÉ™ Albomu âœ¨</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600;700&family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent: #ff4d9d;

      --bg0: #070A12;
      --bg1: #0B1022;

      --text: rgba(255,255,255,.90);
      --muted: rgba(255,255,255,.68);
      --muted2: rgba(255,255,255,.52);

      --cardA: rgba(255,255,255,.10);
      --cardB: rgba(255,255,255,.06);

      --stroke: rgba(255,255,255,.12);
      --stroke2: rgba(255,255,255,.18);

      --shadow2: 0 16px 50px rgba(0,0,0,.30);

      --blur: blur(18px);
      --radius2: 26px;

      --meshA: rgba(255,77,157,.22);
      --meshB: rgba(61,123,253,.18);
      --meshC: rgba(47,191,113,.16);
      --meshD: rgba(255,214,10,.10);

      --safeTop: env(safe-area-inset-top, 0px);
      --safeBottom: env(safe-area-inset-bottom, 0px);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(1100px 800px at 18% 16%, var(--meshA), transparent 55%),
        radial-gradient(900px 700px at 86% 20%, var(--meshB), transparent 58%),
        radial-gradient(900px 650px at 75% 92%, var(--meshC), transparent 60%),
        radial-gradient(700px 600px at 22% 90%, var(--meshD), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
      transition: filter .35s ease, background .35s ease;
    }

    a{ color: inherit; text-decoration:none; }

    /* Aurora */
    .aurora{
      position: fixed;
      inset:-30vh -20vw;
      pointer-events:none;
      z-index:0;
      opacity:.72;
      filter: blur(22px) saturate(1.15);
      mix-blend-mode: screen;
    }
    .aurora::before, .aurora::after{
      content:"";
      position:absolute;
      inset:0;
      background:
        conic-gradient(from 180deg at 40% 40%,
          rgba(255,77,157,.00),
          rgba(255,77,157,.32),
          rgba(50,173,230,.22),
          rgba(52,199,89,.18),
          rgba(255,214,10,.14),
          rgba(255,77,157,.26),
          rgba(255,77,157,.00)
        );
      animation: spin 26s linear infinite;
      transform-origin: 40% 40%;
    }
    .aurora::after{
      inset: 10% 15%;
      opacity:.68;
      animation-duration: 34s;
      transform-origin: 60% 60%;
    }
    @keyframes spin{ to{ transform: rotate(360deg); } }

    /* Grain */
    .grain{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:1;
      opacity:.12;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='https://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
    }

    /* Reveal */
    .reveal{ opacity: 1; transform: none; }
    html.js .reveal{
      opacity: 0;
      transform: translateY(10px) scale(.995);
      transition: opacity .6s ease, transform .7s ease;
      will-change: opacity, transform;
    }
    html.js .reveal.show{
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    /* Toast */
    .toast{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: calc(18px + var(--safeBottom));
      z-index: 5000;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.50);
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      color: rgba(255,255,255,.92);
      box-shadow: 0 18px 70px rgba(0,0,0,.40);
      opacity: 0;
      pointer-events: none;
      transition: opacity .25s ease, transform .25s ease;
      font-weight: 800;
      font-size: .9rem;
      max-width: min(92vw, 560px);
      text-align:center;
    }
    .toast.show{ opacity: 1; transform: translateX(-50%) translateY(-4px); }

    /* Scroll progress */
    .scroll-progress{
      position: fixed;
      top:0; left:0;
      width:100%;
      height: 3px;
      z-index: 9999;
      background: rgba(255,255,255,.06);
    }
    .scroll-progress-bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--accent), rgba(255,255,255,.85));
      box-shadow: 0 0 18px rgba(255,77,157,.45);
    }

    /* Theme switcher */
    .theme-switcher{
      position: fixed;
      right: 14px;
      top: calc(14px + var(--safeTop));
      z-index: 300;
      padding: 10px;
      border-radius: 18px;
      border: 1px solid var(--stroke);
      background: rgba(0,0,0,.25);
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      box-shadow: var(--shadow2);
      display:grid;
      grid-template-columns: repeat(2, 34px);
      gap: 8px;
    }
    .theme-switcher button{
      width: 34px; height: 34px;
      border-radius: 999px;
      border: 2px solid rgba(255,255,255,.30);
      cursor:pointer;
      transition: transform .14s ease, box-shadow .14s ease, border-color .14s ease;
    }
    .theme-switcher button:hover{
      transform: translateY(-1px) scale(1.04);
      box-shadow: 0 0 0 6px rgba(255,255,255,.08);
      border-color: rgba(255,255,255,.55);
    }
    .theme-switcher button.active{
      border-color: rgba(255,255,255,.90);
      box-shadow: 0 0 0 6px rgba(255,255,255,.10), 0 0 26px rgba(0,0,0,.22);
      transform: scale(1.06);
    }

    .container{ width: 100%; }

    /* App container */
    .app{
      position: relative;
      z-index: 3;
      max-width: 1000px;
      margin: 0 auto;
      padding: calc(14px + var(--safeTop)) 18px calc(28px + var(--safeBottom));
    }

    /* Panels / glass */
    .glass{
      border-radius: var(--radius2);
      border: 1px solid var(--stroke);
      background: linear-gradient(180deg, var(--cardA), var(--cardB));
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      box-shadow: var(--shadow2);
      overflow: hidden;
    }
    .glass-inner{ padding: 18px; }

    header{ display:flex; flex-wrap: wrap; gap: 12px; align-items: center; justify-content: space-between; }
    h1{
      margin: 0;
      font-family: "Playfair Display", serif;
      font-size: clamp(2.0rem, 3.7vw, 2.6rem);
      letter-spacing: -0.6px;
      line-height: 1.1;
      color: rgba(255,255,255,.96);
    }
    .subtitle{
      margin: 8px 0 0;
      font-family: "Dancing Script", cursive;
      font-size: 1.35rem;
      color: var(--muted);
    }

    .back-link{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.90);
      font-weight: 900;
      transition: transform .16s ease, background .16s ease, box-shadow .16s ease;
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      white-space: nowrap;
    }
    .back-link:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.10);
      box-shadow: 0 14px 30px rgba(0,0,0,.22);
    }

    .hero{ margin-top: 14px; }
    .hero .glass-inner{
      padding: 20px;
      position: relative;
    }
    .hero .glass-inner::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(620px 280px at 20% 22%, rgba(255,77,157,.22), transparent 60%),
                  radial-gradient(620px 280px at 80% 78%, rgba(61,123,253,.18), transparent 60%);
      opacity: .75;
      filter: blur(18px);
      z-index: 0;
    }
    .hero .glass-inner > *{ position: relative; z-index: 1; }

    .counter{
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 12px;
      margin-top: 14px;
    }
    .counter-box{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      padding: 14px;
    }
    .counter-box > div:first-child{
      color: var(--muted2);
      font-size: .92rem;
      line-height: 1.5;
    }
    .counter-value{
      margin-top: 6px;
      font-size: 1.55rem;
      color: rgba(255,255,255,.96);
      font-weight: 900;
      letter-spacing: -0.3px;
    }

    /* âœ… Month chip button (modern) */
    .chip-btn{
      width: 100%;
      text-align: left;
      display: inline-flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      padding: 12px 12px;
      cursor: pointer;
      transition: transform .16s ease, background .16s ease, box-shadow .16s ease;
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      margin-top: 8px;
      font-weight: 950;
      color: rgba(255,255,255,.96);
    }
    .chip-btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.09);
      box-shadow: 0 14px 30px rgba(0,0,0,.22);
    }
    .chip-btn:active{ transform: translateY(0) scale(.995); }
    .chip-sub{
      font-weight: 800;
      color: var(--muted);
      font-size: .92rem;
    }
    .chev{
      width: 26px;
      height: 26px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      background: rgba(0,0,0,.28);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.86);
      flex: 0 0 auto;
    }

    .memory-filter{ margin: 14px 0; }
    .memory-filter .glass-inner{
      padding: 16px 18px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 12px;
      align-items: end;
    }
    .memory-filter label{ color: var(--muted2); font-size: 0.92rem; }
    .memory-filter select{
      width: 100%;
      margin-top: 8px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.28);
      color: rgba(255,255,255,.90);
      font-size: 0.95rem;
      outline: none;
    }
    .memory-filter select:focus{ border-color: rgba(255,255,255,.28); }

    .grid{
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 14px;
    }
    .card{
      position: relative;
      overflow: hidden;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      box-shadow: 0 18px 54px rgba(0,0,0,.26);
      cursor: pointer;
      transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
    }
    .card:hover{
      transform: translateY(-3px);
      background: rgba(255,255,255,.08);
      box-shadow: 0 22px 70px rgba(0,0,0,.34);
    }
    .card img{
      width: 100%;
      height: 230px;
      object-fit: cover;
      display: block;
      filter: saturate(1.02) contrast(1.02);
    }
    .card-body{ padding: 12px 14px 16px; }
    .card h2{
      margin: 0 0 6px;
      color: rgba(255,255,255,.96);
      font-size: 1.1rem;
      letter-spacing: -0.2px;
    }
    .card small{ color: var(--muted); }
    .overlay{
      position: absolute; inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.76), transparent 62%);
      opacity: 0;
      transition: opacity 0.25s ease;
      display: grid; place-items: end;
      padding: 14px;
      color: rgba(255,255,255,.96);
      font-weight: 900;
      letter-spacing: .2px;
    }
    .card:hover .overlay{ opacity: 1; }

    .modal{
      display: none;
      position: fixed; inset: 0;
      background: rgba(0,0,0,.78);
      z-index: 1000;
      padding: 30px 10px;
    }
    .modal-content{
      max-width: 600px;
      margin: 0 auto;
      border-radius: 26px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.36));
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      box-shadow: 0 26px 80px rgba(0,0,0,.55);
      padding: 18px 18px 12px;
      position: relative;
      color: rgba(255,255,255,.92);
    }
    .close-btn{
      position: absolute;
      right: 12px;
      top: 10px;
      font-size: 28px;
      cursor: pointer;
      color: rgba(255,255,255,.72);
      user-select:none;
    }
    .close-btn:hover{ color: rgba(255,255,255,.92); }

    .modal-title{
      margin: 0 0 10px;
      font-size: 1.35rem;
      color: rgba(255,255,255,.96);
      font-family: "Playfair Display", serif;
      letter-spacing: -0.3px;
    }
    .modal-text{
      line-height: 1.75;
      color: rgba(255,255,255,.88);
      white-space: pre-wrap;
    }
    .modal-footer{
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-top: 14px;
    }
    .nav-btn{
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 900;
      cursor: pointer;
      transition: transform .14s ease, background .14s ease, box-shadow .14s ease;
    }
    .nav-btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.10);
      box-shadow: 0 14px 30px rgba(0,0,0,.22);
    }
    .nav-btn:active{ transform: translateY(0) scale(.99); }

    .modal-index{ color: var(--muted2); font-weight: 800; }

    footer{ text-align: center; color: var(--muted2); margin: 22px 0 10px; font-size: .9rem; }

    /* âœ… Modern Month Sheet */
    .sheet{
      position: fixed;
      inset: 0;
      z-index: 4500;
      display: none;
      align-items: flex-end;
      justify-content: center;
      padding: 14px 14px calc(14px + var(--safeBottom));
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }
    .sheet.show{ display: flex; }
    .sheet-card{
      width: min(760px, 100%);
      border-radius: 26px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.34));
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      box-shadow: 0 26px 90px rgba(0,0,0,.58);
      overflow: hidden;
      transform: translateY(14px);
      opacity: 0;
      transition: transform .22s ease, opacity .22s ease;
    }
    .sheet.show .sheet-card{
      transform: translateY(0);
      opacity: 1;
    }
    .sheet-head{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }
    .sheet-title{
      font-weight: 1000;
      letter-spacing: -.2px;
      font-size: 1.05rem;
      color: rgba(255,255,255,.95);
    }
    .sheet-sub{
      color: var(--muted);
      font-weight: 750;
      font-size: .9rem;
      margin-top: 2px;
    }
    .sheet-close{
      width: 40px;
      height: 40px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      font-size: 22px;
      cursor: pointer;
      transition: transform .14s ease, background .14s ease;
    }
    .sheet-close:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); }
    .sheet-close:active{ transform: translateY(0) scale(.99); }

    .month-grid{
      padding: 14px 16px 16px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }
    @media (max-width: 640px){
      .month-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    .month-card{
      text-align: left;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      padding: 12px;
      cursor: pointer;
      transition: transform .16s ease, box-shadow .16s ease, background .16s ease, border-color .16s ease;
      position: relative;
      overflow:hidden;
    }
    .month-card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(360px 240px at 20% 10%, rgba(255,77,157,.14), transparent 62%),
        radial-gradient(360px 240px at 90% 20%, rgba(61,123,253,.10), transparent 62%);
      opacity: .75;
      pointer-events:none;
    }
    .month-card > *{ position:relative; z-index:1; }

    .month-card:hover{
      transform: translateY(-2px);
      background: rgba(255,255,255,.09);
      box-shadow: 0 18px 55px rgba(0,0,0,.30);
    }
    .month-card:active{ transform: translateY(0) scale(.995); }

    .month-card.active{
      border-color: rgba(255,255,255,.24);
      box-shadow: 0 0 0 2px rgba(255,255,255,.16), 0 22px 70px rgba(0,0,0,.36);
    }

    .month-top{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
    }
    .badge{
      width: 34px;
      height: 34px;
      border-radius: 14px;
      display:grid;
      place-items:center;
      font-weight: 1000;
      background: rgba(0,0,0,.30);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.95);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.22);
    }
    .month-name{
      margin-top: 8px;
      font-weight: 1000;
      color: rgba(255,255,255,.96);
      letter-spacing: -.2px;
      line-height: 1.25;
    }
    .month-meta{
      margin-top: 6px;
      color: var(--muted);
      font-weight: 800;
      font-size: .9rem;
      display:flex;
      align-items:center;
      gap: 8px;
    }
    .dot{
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 18px rgba(255,77,157,.30);
    }

    @media (max-width: 520px){
      .card img{ height: 200px; }
      .theme-switcher{ right: 10px; }
      .app{ padding-left: 14px; padding-right: 14px; }
    }
  

    /* âœ… Scroll-aÃ§Ä±lan "Polaroid Stack" (2-ci ÅŸÉ™kil kimi) */
    .scrapbook-wrap{ margin-top: 16px; }
    .scrapbook-head{
      display:flex;
      align-items:flex-end;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }
    .scrapbook-title{
      margin: 0;
      font-family: "Playfair Display", serif;
      font-size: 1.35rem;
      letter-spacing: -0.2px;
      color: rgba(255,255,255,.96);
      line-height: 1.15;
    }
    .scrapbook-sub{
      margin: 6px 0 0;
      color: var(--muted);
      font-weight: 750;
      font-size: .95rem;
      line-height: 1.5;
    }
    .scrapbook-meta{
      color: var(--muted2);
      font-weight: 850;
      font-size: .92rem;
      white-space: nowrap;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
    }

    .scrapbook-board{
      position: relative;
      overflow: hidden;
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,.14);
      padding: 18px 16px 22px;
      background:
        radial-gradient(780px 520px at 12% 18%, rgba(47,191,113,.28), transparent 58%),
        radial-gradient(860px 560px at 92% 14%, rgba(61,123,253,.22), transparent 60%),
        radial-gradient(760px 560px at 70% 95%, rgba(255,77,157,.14), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.05), rgba(0,0,0,.22));
      box-shadow: 0 26px 90px rgba(0,0,0,.36);
    }
    .scrapbook-board::after{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(900px 420px at 50% 0%, rgba(255,255,255,.08), transparent 60%),
        radial-gradient(650px 420px at 15% 55%, rgba(255,255,255,.06), transparent 60%);
      opacity:.9;
      filter: blur(16px);
      pointer-events:none;
    }
    .scrapbook-board > *{ position: relative; z-index: 1; }

    .paper-stack{
      width: min(460px, 100%);
      margin: 0 auto;
      display:flex;
      flex-direction: column;
      align-items: center;
      padding: 6px 0 2px;
    }

    .paper{
      --dx: 0px;
      --dy: 0px;
      --rot: 0deg;

      --op: 1;
      --blurPx: 0px;
      --popY: 0px;
      --popS: 1;

      width: min(420px, 100%);
      border-radius: 18px;
      background: rgba(255,255,255,.92);
      color: #121212;
      border: 1px solid rgba(0,0,0,.10);
      box-shadow: 0 18px 55px rgba(0,0,0,.30);
      overflow: hidden;
      position: relative;

      opacity: var(--op);
      filter: blur(var(--blurPx));
      transform:
        translateX(var(--dx))
        translateY(var(--dy))
        rotate(var(--rot))
        translateY(var(--popY))
        scale(var(--popS));
      transform-origin: 50% 85%;

      transition:
        opacity .65s ease,
        transform .85s cubic-bezier(.2,.9,.2,1),
        filter .65s ease;
      will-change: transform, opacity, filter;
    }

    /* "Tape" */
    .paper::before{
      content:"";
      position:absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%) rotate(-2deg);
      width: 134px;
      height: 36px;
      border-radius: 10px;
      background: linear-gradient(180deg, rgba(255,255,255,.88), rgba(255,255,255,.55));
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 12px 26px rgba(0,0,0,.16);
      opacity: .92;
      mix-blend-mode: overlay;
      pointer-events:none;
    }

    .paper + .paper{ margin-top: -112px; }

    .paper.photo img{
      width: 100%;
      height: 238px;
      object-fit: cover;
      display:block;
      background: rgba(0,0,0,.06);
    }
    .paper.photo figcaption{
      padding: 10px 12px 14px;
      font-family: "Dancing Script", cursive;
      font-size: 1.18rem;
      color: rgba(0,0,0,.82);
      line-height: 1.25;
    }
    .paper.photo figcaption .cap-sub{
      display:block;
      font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-size: .86rem;
      margin-top: 4px;
      color: rgba(0,0,0,.56);
      font-weight: 750;
    }

    .paper.p1{ --dx:-12px; --dy: 6px;  --rot: -6deg; }
    .paper.p2{ --dx: 14px; --dy: 0px;  --rot:  4deg; }
    .paper.letter{ --dx: 0px;  --dy:-8px; --rot: -1.5deg; }

    /* reveal-dÉ™n sonra "aÃ§Ä±lÄ±ÅŸ" effektlÉ™ri */
    .scrapbook-wrap.reveal .paper{
      --op: 0;
      --blurPx: 3px;
      --popY: 26px;
      --popS: .96;
    }
    .scrapbook-wrap.reveal.show .paper{
      --op: 1;
      --blurPx: 0px;
      --popY: 0px;
      --popS: 1;
    }
    .scrapbook-wrap.reveal .paper.p1{ transition-delay: .05s; }
    .scrapbook-wrap.reveal .paper.p2{ transition-delay: .20s; }
    .scrapbook-wrap.reveal .paper.letter{ transition-delay: .35s; }

    @keyframes floaty{
      0%,100%{ transform:
        translateX(var(--dx)) translateY(var(--dy)) rotate(var(--rot))
        translateY(0px) scale(1);
      }
      50%{ transform:
        translateX(var(--dx)) translateY(var(--dy)) rotate(var(--rot))
        translateY(-6px) scale(1.003);
      }
    }
    .scrapbook-wrap.reveal.show .paper{
      animation: floaty 8s ease-in-out infinite;
    }
    .scrapbook-wrap.reveal.show .paper.p2{ animation-duration: 9.5s; }
    .scrapbook-wrap.reveal.show .paper.letter{ animation-duration: 10.5s; }

    /* Letter open/close */
    .letter-shell{ display:block; }
    .letter-front{
      width: 100%;
      border: 0;
      background: transparent;
      cursor: pointer;
      text-align: left;
      padding: 16px 16px 14px;
      display:block;
      color: rgba(0,0,0,.86);
    }
    .letter-front-row{
      display:flex;
      align-items:center;
      gap: 12px;
    }
    .letter-stamp{
      width: 44px;
      height: 44px;
      border-radius: 14px;
      display:grid;
      place-items:center;
      background: rgba(0,0,0,.06);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.55);
      font-size: 20px;
      flex: 0 0 auto;
    }
    .letter-front-title{
      font-weight: 950;
      letter-spacing: -0.2px;
      font-size: 1.05rem;
      line-height: 1.2;
    }
    .letter-front-hint{
      margin-top: 4px;
      font-weight: 800;
      color: rgba(0,0,0,.55);
      font-size: .9rem;
    }

    .letter-body{
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transform: translateY(-8px);
      transition: max-height .65s ease, opacity .35s ease, transform .45s ease;
      padding: 0 16px;
    }
    .letter-body-title{
      margin: 10px 0 8px;
      font-family: "Playfair Display", serif;
      font-size: 1.15rem;
      letter-spacing: -0.2px;
      color: rgba(0,0,0,.86);
    }
    .letter-body-text{
      white-space: pre-wrap;
      line-height: 1.7;
      color: rgba(0,0,0,.74);
      font-weight: 700;
      font-size: .95rem;
      padding-bottom: 8px;
    }
    .letter-close{
      margin: 8px 0 14px;
      border: 1px solid rgba(0,0,0,.12);
      background: rgba(0,0,0,.06);
      color: rgba(0,0,0,.82);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 950;
      cursor:pointer;
      transition: transform .14s ease, background .14s ease;
      width: 100%;
    }
    .letter-close:hover{ transform: translateY(-1px); background: rgba(0,0,0,.08); }
    .letter-close:active{ transform: translateY(0) scale(.99); }

    .paper.letter.open .letter-body{
      max-height: 520px;
      opacity: 1;
      transform: translateY(0);
    }
    .paper.letter.open .letter-front{
      opacity: .98;
    }

    @media (max-width: 520px){
      .paper.photo img{ height: 220px; }
      .paper + .paper{ margin-top: -98px; }
      .scrapbook-meta{ white-space: normal; }
    }

  </style>
</head>

<body>
  <div class="scroll-progress" aria-hidden="true"><div class="scroll-progress-bar" id="scrollBar"></div></div>
  <div class="aurora" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <!-- Tema switcher -->
  <div class="theme-switcher" aria-label="Tema seÃ§imi">
    <button id="theme-pink"  data-theme="pink"  title="pink"  style="background: rgba(255,77,157,.95)"></button>
    <button id="theme-blue"  data-theme="blue"  title="blue"  style="background: rgba(61,123,253,.95)"></button>
    <button id="theme-green" data-theme="green" title="green" style="background: rgba(47,191,113,.95)"></button>
    <button id="theme-night" data-theme="night" title="night" style="background: rgba(10,10,20,.95)"></button>
  </div>

  <div class="app">
    <div class="container">
      <div class="glass hero reveal">
        <div class="glass-inner">
          <header>
            <a class="back-link" href="index.html">â† Æsas SÉ™hifÉ™</a>
            <div>
              <h1>XatirÉ™ Albomu</h1>
              <p class="subtitle">ÅÉ™killÉ™rÉ™ toxun, hekayÉ™lÉ™ri oxu â€“ hÉ™r birindÉ™ sÉ™n varsan ğŸ’Œ</p>
            </div>
          </header>

          <div class="counter">
            <div class="counter-box">
              <div>BirlikdÉ™ olduÄŸumuz Sevgi DÃ¶vrÃ¼:</div>
              <div id="countdown-timer" class="counter-value">0 GÃ¼n</div>
            </div>

            <div class="counter-box">
              <div>Ay bÃ¶lmÉ™si (toxun seÃ§):</div>
              <button id="month-chip" class="chip-btn" type="button">
                <span>
                  <span id="month-chip-text">HamÄ±sÄ±</span>
                  <span class="chip-sub" id="month-chip-sub">BÃ¶lmÉ™ seÃ§mÉ™k Ã¼Ã§Ã¼n toxun</span>
                </span>
                <span class="chev">âŒ„</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="memory-filter glass reveal">
        <div class="glass-inner">
          <div>
            <label for="memory-select">XÃ¼susi bir xatirÉ™ni seÃ§:</label>
            <select id="memory-select"><option value="">HamÄ±sÄ±nÄ± gÃ¶stÉ™r</option></select>
          </div>

          <div>
            <label>Ãœmumi say:</label>
            <div id="memory-count" class="counter-value">0</div>
          </div>
        </div>
      </div>

      <main id="memories-list" class="grid"></main>

      <!-- âœ… Scroll endikcÉ™ aÃ§Ä±lan xÃ¼susi "stack" bÃ¶lmÉ™si -->
      <section class="scrapbook-wrap glass reveal" id="special-stack">
        <div class="glass-inner">
          <div class="scrapbook-head">
            <div>
              <h2 class="scrapbook-title" id="specialStackHeading">XÃ¼susi SÉ™hifÉ™ ğŸ’š</h2>
              <div class="scrapbook-sub" id="specialStackSub">AÅŸaÄŸÄ± endikcÉ™ aÃ§Ä±lan balaca bir sÃ¼rprizâ€¦</div>
            </div>
            <div class="scrapbook-meta" id="specialStackDate">12 Dekabr, 2025</div>
          </div>

          <div class="scrapbook-board" aria-label="ÅÉ™killÉ™r vÉ™ mÉ™ktub bÃ¶lmÉ™si">
            <div class="paper-stack">

              <figure class="paper photo p1" aria-label="1-ci ÅŸÉ™kil">
                <img id="specialPhoto1" src="https://i.ibb.co/gLLz3qWt/Whats-App-mage-2026-01-01-at-20-51-07-1.jpg" alt="XÃ¼susi ÅŸÉ™kil 1" loading="lazy" decoding="async">
                <figcaption>
                  <span id="specialCaption1">Birinci ÅŸÉ™kil âœ¨</span>
                  <span class="cap-sub">xatirÉ™mizdÉ™n bir kadr</span>
                </figcaption>
              </figure>

              <figure class="paper photo p2" aria-label="2-ci ÅŸÉ™kil">
                <img id="specialPhoto2" src="https://i.ibb.co/gLLz3qWt/Whats-App-mage-2026-01-01-at-20-51-07-1.jpg" alt="XÃ¼susi ÅŸÉ™kil 2" loading="lazy" decoding="async">
                <figcaption>
                  <span id="specialCaption2">Ä°kinci ÅŸÉ™kil ğŸ’«</span>
                  <span class="cap-sub">gÃ¶zÃ¼mÃ¼n iÃ§i gÃ¼lÉ™n an</span>
                </figcaption>
              </figure>

              <div class="paper letter" id="specialLetter" aria-label="MÉ™ktub">
                <button class="letter-front" type="button" aria-expanded="false">
                  <div class="letter-front-row">
                    <div class="letter-stamp">ğŸ’Œ</div>
                    <div>
                      <div class="letter-front-title" id="specialLetterFrontTitle">MÉ™ktub</div>
                      <div class="letter-front-hint" id="specialLetterFrontHint">AÃ§maq Ã¼Ã§Ã¼n toxun</div>
                    </div>
                  </div>
                </button>

                <div class="letter-body" aria-hidden="true">
                  <div class="letter-body-title" id="specialLetterTitle">SÉ™nÉ™ balaca bir sÃ¶zÃ¼m varâ€¦</div>
                  <div class="letter-body-text" id="specialLetterText">Gozeeelim bidenemm bilirem yatrsan amma icimnen gelr deye yazramâ€¦..) cox qeribedi dehset cox darxram sevreme seni her seher oldugu kimi birinci senin adivi fikirlesb oynaacam
Sevgilim seninle keÃ§irdiyim her an qelbimin en derin yerlerine toxunan bir mÃ¶cÃ¼zze kimidi HeyatÄ±ma geldiyin o gÃ¼nnen beri her ÅŸey bir baÅŸqa gÃ¶zel oldu GÃ¶zlerinin iÃ§indeki o Ä±ÅŸÄ±ltÄ± en qaranlÄ±q anlarÄ±mda bele mene yol gÃ¶sterir Seninle birlikde yaÅŸamaq heyatda en doÄŸru qerarÄ± verdiyimi her an hiss etdirirrr Ã§Ã¼nki seninle her ÅŸey mÃ¼mkÃ¼ndÃ¼ee Sene olan sevgim her keÃ§en gÃ¼n daha da Ã§oxalÄ±rr Seninle birliyde dÃ¼nyanÄ±n bÃ¼tÃ¼n Ã§etinliklerine qarÅŸÄ± dimdik dura bilerem Ã§Ã¼nki senin sevgin mene her zaman en bÃ¶yÃ¼k cesareti verir Sen menim heyatÄ±mÄ±n menasÄ± gÃ¶zelimseen sennen bir Ã¶mÃ¼r boyu bu sefere Ã§Ä±xmaq en bÃ¶yÃ¼y arzumdu
Seni Ã§ox sevirem ve bu sevginin sona qeder  sÃ¼receyinden heÃ§ ÅŸÃ¼bhem yoxduuu - bil ki bu sÃ¶zlÉ™ri yazanda iÃ§imdÉ™ o ilk gÃ¶rÃ¼ÅŸdÃ¼yÃ¼mÃ¼z gÃ¼nÃ¼n hÉ™yÉ™canÄ± var heÃ§ azalmayÄ±b É™ksinÉ™ her keÃ§en gÃ¼n daha da bÃ¶yÃ¼yÃ¼b. Seninle keÃ§en hÉ™r deqiqÉ™ hÉ™r saniyÉ™ menim Ã¼Ã§Ã¼n en qiymÉ™tli ÅŸeyi O ilk tanÄ±ÅŸ olduÄŸumuz gÃ¼nÃ¼ yada sal... elebir kosmos, ulduzlar hamÄ±sÄ± bizi bir araya gÉ™tirmÉ™k Ã¼Ã§Ã¼n dÃ¼zÃ¼lmÃ¼ÅŸdÃ¼. ğŸ¤£ O an hiss elediyim duyÄŸu heÃ§ nÉ™yÉ™ deyiÅŸmerem. O vaxt hiss eledm ki elebir ruhumun yarÄ±mÃ§Ä±q qalmÄ±ÅŸ yeri tamamlandÄ± Seninle olan o ilk gÃ¼nlÉ™r qelbimin É™n tez vurduÄŸu, É™n tÉ™miz É™n ÅŸirin hÉ™yÉ™canlarÄ± yaÅŸadÄ±ÄŸÄ±m anlardÄ± Æl-É™lÉ™ tutanda bir-birimizÉ™ baxanda bÃ¼tÃ¼n dÃ¼nya susurdu vaxt dayanmÄ±ÅŸdÄ± O gÃ¼ndÉ™n bu yana sÉ™ninlÉ™ yaÅŸadÄ±ÄŸÄ±mz hÉ™r anÄ± hÉ™r gÃ¼nÃ¼ Ã¼rÉ™yimdÉ™ xÃ¼susi bir yerdÉ™ sevgi ilÉ™ saxlayÄ±ram. BirlikdÉ™ qurduÄŸumuz o sadÉ™ arzularÄ±mÄ±z sÉ™hÉ™rlÉ™r oyandÄ±qda Ã¼zÃ¼mdÉ™ki kiÃ§ik bir gÃ¼lÃ¼msÉ™mÉ™, Ã§É™tin gÃ¼nlÉ™rdÉ™ mÉ™nÉ™ verdiyin o mÃ¶hkÉ™m dÉ™stÉ™y.. BunlarÄ±n hamÄ±sÄ± bizim Ã¶zÉ™l hekayÉ™mizdiee Seninleyken nemme MÉ™nÉ™ hiss etdirdiyin o saf sevgi, o etibar hissi, mÉ™ni mÉ™n eleyen É™n gÃ¶zÉ™l hissdi. HÉ™r keÃ§É™n gÃ¼n, sÉ™nÉ™ olan sevgim daha da dÉ™rinlÉ™ÅŸir, daha da bÃ¶yÃ¼yÃ¼r Senin gÃ¶zlÉ™rinÉ™ baxanda mÉ™n tÉ™kcÉ™ gÉ™lÉ™cÉ™yi yox hÉ™m dÉ™ rahatlÄ±ÄŸÄ± vÉ™ xoÅŸbÉ™xtliyi gÃ¶rÃ¼rÉ™m SÉ™n mÉ™nim ilk hÉ™yÉ™canÄ±m son dayanacaÄŸÄ±n É™n bÃ¶yÃ¼k aÅŸkmmsaane. NÉ™ yaxÅŸÄ± ki o gÃ¼n yollarÄ±mÄ±z kÉ™siÅŸdi gÃ¶z gÃ¶zÉ™ gÉ™ldiy, hÉ™yatÄ±ma bu qÉ™dÉ™r gÃ¶zÉ™llik gÉ™tirdin. Seni sÃ¶zlÉ™rlÉ™ ifade etmÉ™k Ã§É™tindi amma bil ki sÉ™nÉ™ Ã§ooox bÃ¶yÃ¼k bir sevgi ilÉ™ baÄŸlÄ±yam! Nemmme dÉ™hÅŸÉ™t Ã§ox deyÉ™cÉ™y ÅŸeylÉ™r var amma o qede qorxuramki ani bir hereketimde seni itirerem veya nem xetrive deyerem inciderem buna gore her hereketimi ayri ayriliqda fikirlesirem diqqet yetitirem nem hemn oyun oynadigimz futbol oynadgmz gun cox qeribe idim dÃ¼zdÃ¼ Sevdiyim qadÄ±na qarÅŸÄ± sehf bir hereketm ola bilmez bunu defelerle senle danÄ±ÅŸmÄ±ÅŸÄ±q ve billemki sen mennende dehsetsenğŸ¤£ğŸ¤£ yenede yeni ozumde cox caresiz idim hecbir prinsipe girdiyim mamentde ozumu itirmemisem veya prinsipe girib uduzmamÄ±ÅŸam en aznnan qarsmdaki sozu dile getiribki he bacarirsan bunu menm hecvaxt niyyetim sene qarsi pis olmaz senle yatmag istemey olsa bele nem veya seni opmey seni qucaÄŸlamag herseyde Yeni yenede sevdiyimnendi hamisi ve Heqiqetende ne desende men cannan basnan yerine yetirerem cunki nem qadinimin sozunu dinlemey acizliy yox bas tacidi menim Ã¼Ã§Ã¼n seviremse incidsem xetrne deysem ozum cox pis olaram ona gÃ¶re her hereketi eliyende sene defelerle sorusuram nem soz aliramki sonra problem yaranmasÄ±n sadece isteyremki ne elesemde yeni meni basglaariynan bir tutmagivi itemrem cunki heqiqeten iyreneremki men nem durub Babinik veya cindirin biriynen bir tutulum bu qede hissler dusuncelerm ola ola Seni hedsiz Ã§oxxxx sevirem ve seni gorende heqiqeten dilim dolaÅŸÄ±r elim ayaÄŸÄ±m bir birine girir belli elemesemde sadece dilim dolasdigi cox bellidi oyun gunnenn elave her gorusduyum nem getdymiz yol o qede huzur o qede xosbext oluramki adice quacgliyanda o qoxunu icime alirama Nemm yadmnan cixmir eriyirem Sennen elÉ™diyimiz davanÄ± heÃ§bir insana deyismerem ister en yaxissi ister en pisi ister ister en gozeli olsun yenede seni heckime dÉ™yiÅŸmÉ™rÉ™m MÉ™n sÉ™ni bu hÉ™yatda hÉ™r ÅŸeydÉ™n Ã§ox sevirÉ™m vÉ™ bu hÉ™miÅŸÉ™ belÉ™ qalacaq. QÉ™lbim Ã¶mrÃ¼mÃ¼n son damlasÄ±na qÉ™dÉ™r sÉ™nin Ã¼Ã§Ã¼n dÃ¶ymÉ™yÉ™ davam elÉ™yÉ™cÉ™yyy BÉ™zÉ™n mÃ¼bahisÉ™ elÉ™sÉ™y dÉ™ dalaÅŸsaq da mÉ™n sÉ™ndÉ™n heÃ§ vaxt vaz keÃ§mereme SÉ™n mÉ™nim hÉ™yatÄ±mmm , qÉ™lbimin bir parÃ§asÄ±san. BÃ¼tÃ¼n bunlara baxmayaraq, bÉ™lkÉ™ bir gÃ¼n Allah yollarÄ±mÄ±zÄ± ayÄ±rarâ€¦ (ALLAH ELÆMÆSÄ°N) ÆgÉ™r elÉ™ olsa, o zaman sÉ™ni necÉ™ ÅŸÉ™rtsiz vÉ™ qarÅŸÄ±lÄ±qsÄ±z sevdiyimi yaddan Ã§Ä±xartma HeÃ§ kimÉ™ qulaq asma, heÃ§ kim Ã¼Ã§Ã¼n Ã¶zÃ¼nÃ¼ Ã¼zmÉ™ mÉ™n olsam belÉ™. Seni tanidigim gÃ¼nne MÄ°NNN ÅÃœKÃœRRR SÉ™nnÉ™n keÃ§irdiyimiz hÉ™r gÃ¼n mÉ™nÉ™ dÉ™rin bir rahatlÄ±ÄŸ verir Ã‡Ã¼nki sÉ™n olduÄŸun kimi qalmaÄŸÄ± bacaran tÉ™bii sÉ™mimi birisÉ™n MÉ™n dÉ™ sÉ™nin yanÄ±nda Ã¶zÃ¼m oluram heÃ§ nÉ™yimi gizlÉ™tmirÉ™m hÉ™r ÅŸey yerinÉ™ oturur.. elÉ™ buna gÃ¶rÉ™ sÉ™ni sevmÉ™y mÉ™nim Ã¼Ã§Ã¼n Ã§É™tin deyil, É™ksinÉ™ Ã§ox asandÄ±â¤ï¸ BÉ™zÉ™n sÉ™ni BelÉ™ aralÄ±ÄŸsÄ±z dayanmadan qucaqlamaÄŸ istiyirÉ™m yaxÄ±nlÄ±ÄŸÄ±nÄ± hiss elÉ™mÉ™y sadÉ™cÉ™ sakitcÉ™ yan-yana oturmaqâ€¦ BilmirÉ™m niyÉ™, amma sÉ™nin toxunuÅŸunda insana rahatlÄ±q verÉ™n bir istiliy var. O an iÃ§imdÉ™ sakit bir istÉ™y olur abartÄ±sÄ±z tam tÉ™biiâ€¦ sadÉ™cÉ™ sÉ™n olduÄŸun Ã¼Ã§Ã¼n.ğŸ«‚ MÉ™n heÃ§ vaxt fikirlÉ™ÅŸmÉ™miÅŸdim ki kimisÉ™ bu qÉ™dÉ™r Ã§ox bu qÉ™dÉ™r dÉ™rin sevÉ™ bilÉ™rÉ™m. SÉ™n mÉ™nim gÉ™lÉ™cÉ™yÉ™ atdÄ±ÄŸÄ±m hÉ™r bir addÄ±mÄ±n sÉ™bÉ™bisÉ™neee MÉ™n sabah nÉ™ elÉ™yÉ™cÉ™yimi necÉ™ edeceyiki fikirlÉ™ÅŸÉ™ndÉ™ o planda hÉ™miÅŸÉ™ sÉ™n varsan. Bil ki sÉ™ninlÉ™ olmaq mÉ™nim Ã¼Ã§Ã¼n bir ÅŸansdÄ± AllahÄ±n mÉ™nÉ™ bÉ™xÅŸ etdiyi É™n bÃ¶yÃ¼k lÃ¼tfdÃ¼ HÉ™miÅŸÉ™ xoÅŸbÉ™xt olaq. 
He birde bu Ã§oxx sevmey sohbeti 
Sevgilim, gÉ™l bunda sene hisslermnen izah eliyim MÉ™n sÉ™ni sÉ™nin mÉ™ni sevdiyin kimi sevmÉ™yÉ™ borclu deyilÉ™m VÉ™ sÉ™nin mÉ™ni daha Ã§ox sevmÉ™yinÉ™ dÉ™ ehtiyac yoxdu MÉ™nim sevgim rÉ™qabÉ™t deyil hÃ¼zr heqiqidi .
MÉ™nim sevgim sadÉ™cÉ™ sÉ™nÉ™ aiddi BidenemğŸ’ MÉ™n sÉ™ni mÉ™n necÉ™ hiss edirÉ™msÉ™ elÉ™ sevirÉ™m. Bu sevgi, nÉ™ sÉ™nin, nÉ™ dÉ™ mÉ™nim Ã¶lÃ§Ã¼yÉ™ sÄ±ÄŸdÄ±ra bilÉ™cÉ™yimiz bir ÅŸey deyil. Æsas olan kimin daha bÃ¶yÃ¼k sevmÉ™si deyil, É™sas olan hÉ™r ikimizin bu sevgini gerÃ§É™y yaÅŸamasÄ±dÄ±. VÉ™ mÉ™nim hÉ™r hÃ¼ceyrÉ™mdÉ™ sÉ™n varsan.
Bu mÃ¼bahisÉ™ ilÉ™ vaxt itirmÉ™k É™vÉ™zinÉ™ gÉ™l bu sevgini daha da gÃ¼clÉ™ndirÉ™y. Sevgimi sÃ¼but etmÉ™y yerinÉ™ sadÉ™cÉ™ yaÅŸamaq istÉ™yirÉ™m VÉ™ bunu sÉ™ninlÉ™ yaÅŸamaq istÉ™yirÉ™m. Bitdi.ğŸ¥°
HeÃ§ vaxt unutma: SÉ™n mÉ™nim bidÉ™nÉ™msÉ™n, gÃ¶zÉ™limsÉ™n É™nn É™sasÄ± YoldaÅŸÄ±mmsann. SÆNÄ°Ä° Ã‡OOOOOX SEVÄ°RÆMMMMM Ã‡OXLU Ã‡OXLU Ã¶pÃ¼reemmmm Ball dodaÄŸlarnnann Åipppp ÅŸirinnn yuxularrrr heyaaatimmmmm

â€” hÉ™r zaman sÉ™nin</div>
                  <button class="letter-close" type="button">BaÄŸla</button>
                </div>
              </div>

            </div>
          </div>
        </div>
      </section>

    </div>
  </div>

  <!-- Modal (story) -->
  <div id="memoryModal" class="modal">
    <div class="modal-content">
      <span class="close-btn">Ã—</span>
      <h2 id="modal-title" class="modal-title"></h2>
      <p id="modal-text" class="modal-text"></p>
      <div class="modal-footer">
        <button class="nav-btn" id="prev-memory">â† ÆvvÉ™lki</button>
        <span class="modal-index" id="modal-index"></span>
        <button class="nav-btn" id="next-memory">SonrakÄ± â†’</button>
      </div>
    </div>
  </div>

  <!-- âœ… Month Sheet -->
  <div class="sheet" id="monthSheet" aria-hidden="true">
    <div class="sheet-card" role="dialog" aria-modal="true" aria-label="Ay bÃ¶lmÉ™si seÃ§imi">
      <div class="sheet-head">
        <div>
          <div class="sheet-title">Ay bÃ¶lmÉ™sini seÃ§</div>
          <div class="sheet-sub">1-ci ay, 2-ci ayâ€¦ hamÄ±sÄ± burda olacaq âœ¨</div>
        </div>
        <button class="sheet-close" id="monthCloseBtn" type="button">Ã—</button>
      </div>
      <div class="month-grid" id="monthGrid"></div>
    </div>
  </div>

  <div class="toast" id="toast" aria-live="polite"></div>

  <script>
    document.documentElement.classList.add('js');

    // 08.11.2025 â€“ ay 0-dan baÅŸlayÄ±r deyÉ™ 10 yazÄ±lÄ±r (11-ci ay)
    const startDate = new Date(2025, 10, 8);

    // âœ… Ay bÃ¶lmÉ™lÉ™ri (istÉ™diyin qÉ™dÉ™r artÄ±r)
    const monthSections = [
      { key: "all",     label: "HamÄ±sÄ±" },
      { key: "2025-11", label: "1-ci ay â€” Noyabr" },
      { key: "2025-12", label: "2-ci ay â€” Dekabr" },
      { key: "2026-01", label: "3-cÃ¼ ay â€” Yanvar" },
      { key: "2026-02", label: "4-cÃ¼ ay â€” Fevral" },
      { key: "2026-03", label: "5-ci ay â€” Mart" }
    ];

    // âœ… AÅŸaÄŸÄ± endikcÉ™ aÃ§Ä±lan "Stack" bÃ¶lmÉ™si (2 ÅŸÉ™kil + 1 mÉ™ktub)
    // Ä°stÉ™sÉ™n buradakÄ± linklÉ™ri vÉ™ mÉ™tni dÉ™yiÅŸ, qalan kod toxunulmaz qalÄ±r.
    const specialStackData = {
      heading: "XÃ¼susi SÉ™hifÉ™ ğŸ’š",
      sub: "AÅŸaÄŸÄ± endikcÉ™ aÃ§Ä±lan balaca bir sÃ¼rprizâ€¦",
      date: "12 Dekabr, 2025",

      photo1: "https://i.ibb.co/PZFWHH6h/Whats-App-mage-2026-01-01-at-20-51-07-1.jpg",
      caption1: "Birinci ÅŸÉ™kil âœ¨",
      sub1: "xatirÉ™mizdÉ™n bir kadr",

      photo2: "https://i.ibb.co/gLS8xbch/Whats-App-mage-2026-01-02-at-13-15-30.jpg",
      caption2: "Ä°kinci ÅŸÉ™kil ğŸ’«",
      sub2: "gÃ¶zÃ¼mÃ¼n iÃ§i gÃ¼lÉ™n an",

      letterFrontTitle: "MÉ™ktub",
      letterFrontHint: "AÃ§maq Ã¼Ã§Ã¼n toxun",
      letterTitle: "SÉ™nÉ™ balaca bir sÃ¶zÃ¼m varâ€¦",
      letterText:
`...
â€” hÉ™r zaman sÉ™nin`
    };

    function initSpecialStack(){
      // baÅŸlÄ±q / tarix
      const h = document.getElementById('specialStackHeading');
      const s = document.getElementById('specialStackSub');
      const d = document.getElementById('specialStackDate');
      if(h) h.textContent = specialStackData.heading;
      if(s) s.textContent = specialStackData.sub;
      if(d) d.textContent = specialStackData.date;

      // ÅŸÉ™killÉ™r
      const p1 = document.getElementById('specialPhoto1');
      const p2 = document.getElementById('specialPhoto2');
      const c1 = document.getElementById('specialCaption1');
      const c2 = document.getElementById('specialCaption2');

      if(p1) { p1.src = specialStackData.photo1; p1.alt = specialStackData.caption1 || "ÅÉ™kil 1"; }
      if(p2) { p2.src = specialStackData.photo2; p2.alt = specialStackData.caption2 || "ÅÉ™kil 2"; }

      if(c1) c1.textContent = specialStackData.caption1;
      if(c2) c2.textContent = specialStackData.caption2;

      // caption sub-lar (cap-sub) â€“ varsa doldur
      const subEls = document.querySelectorAll('#special-stack .cap-sub');
      if(subEls && subEls.length >= 2){
        if(subEls[0]) subEls[0].textContent = specialStackData.sub1 || "";
        if(subEls[1]) subEls[1].textContent = specialStackData.sub2 || "";
      }

      // mÉ™ktub
      const letter = document.getElementById('specialLetter');
      if(!letter) return;

      const frontTitle = document.getElementById('specialLetterFrontTitle');
      const frontHint  = document.getElementById('specialLetterFrontHint');
      const titleEl    = document.getElementById('specialLetterTitle');
      const textEl     = document.getElementById('specialLetterText');

      if(frontTitle) frontTitle.textContent = specialStackData.letterFrontTitle;
      if(frontHint)  frontHint.textContent  = specialStackData.letterFrontHint;
      if(titleEl)    titleEl.textContent    = specialStackData.letterTitle;
      if(textEl)     textEl.textContent     = specialStackData.letterText;

      const frontBtn = letter.querySelector('.letter-front');
      const bodyEl   = letter.querySelector('.letter-body');
      const closeBtn = letter.querySelector('.letter-close');

      const setOpen = (open) => {
        letter.classList.toggle('open', open);
        if(frontBtn) frontBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
        if(bodyEl) bodyEl.setAttribute('aria-hidden', open ? 'false' : 'true');
      };

      if(frontBtn){
        frontBtn.addEventListener('click', () => setOpen(!letter.classList.contains('open')));
      }
      if(closeBtn){
        closeBtn.addEventListener('click', () => setOpen(false));
      }
    }


    // âœ… XatirÉ™lÉ™r (hazÄ±rkÄ±lar noyabr)
    const memoryData = [
      { month: "2025-11", title: "1. Ä°lk GÃ¶rÃ¼ÅŸ BaÅŸlanÄŸÄ±c", image: "https://i.ibb.co/bjXRpffW/Whats-App-mage-2025-12-08-at-12-33-16.jpg", text: "Bizim ilk gÃ¶rÃ¼ÅŸÃ¼mÃ¼zdÉ™n sonra, sÉ™ninlÉ™ danÄ±ÅŸdÄ±ÄŸÄ±mÄ±z gecÉ™nin sÉ™hÉ™ri ÅŸÉ™hÉ™rÉ™ Ã§Ä±xmaÄŸÄ±mÄ±z var ha... Bax, o gÃ¼n mÉ™nim Ã¼Ã§Ã¼n hÉ™yatÄ±mÄ±n É™n gÃ¶zÉ™l baÅŸlanÄŸÄ±cÄ± idi. HÉ™lÉ™ bir neÃ§É™ saat idi ki, rÉ™smÉ™n Bizz olmuÅŸduq, amma o gÃ¼n sÉ™nÉ™ nÉ™ qÉ™dÉ™r yaxÄ±n, nÉ™ qÉ™dÉ™r sÉ™mimi olduÄŸumu sÃ¶zlÉ™rlÉ™ ifadÉ™ edÉ™ bilmirÉ™m. Ä°lk gÃ¶rÃ¼ÅŸdÃ¼yÃ¼mÃ¼z gÃ¼n o qÉ™dÉ™r hÉ™yÉ™canlÄ± idim ki, iÃ§imdÉ™ 'Yeni nÉ™sÉ™ olacaq' deyÉ™ Ã§Ä±rpÄ±nÄ±rdÄ±." },
      { month: "2025-11", title: "2. GÃ¶zlÉ™rim SÉ™ndÉ™n AyrÄ±lmadÄ±", image: "https://i.ibb.co/hvxJN9G/Whats-App-mage-2025-12-08-at-12-33-15.jpg", text: " GÃ¶zlÉ™rimi sÉ™ndÉ™n ayÄ±rmaq istÉ™mirdim, Ã§Ã¼nki hÉ™r saniyÉ™ dÉ™yÉ™rli idi. Gozlerimi heccur sennen ayira bilmrdim ilk gÃ¶rÃ¼ÅŸ idi nem sevmeye bilerdin narahat olmuyasan deye gozlerimi istemeden olsada alirdim sennen ammaki heqiqeten Ã§ox aÅŸiq olmusdum" },
      { month: "2025-11", title: "3. ÅÉ™n YemÉ™k AnÄ±", image: "https://i.ibb.co/Pv1Xnph7/Whats-App-mage-2025-12-08-at-12-33-16-1.jpg", text: " McDonald'sda yemÉ™k yeyib, gÃ¼lÃ¼ÅŸdÃ¼yÃ¼mÃ¼z anlarÄ± da heÃ§ vaxt unutmayacaÄŸam. Amma É™n xÃ¼susi anÄ±mÄ±z... O gÃ¼n bizÉ™ uÄŸur gÉ™tirÉ™n 8 nÃ¶mrÉ™li oyuncaÄŸÄ± seÃ§mÉ™yimiz idi. BilirsÉ™n, o, mÉ™nim Ã¼Ã§Ã¼n sadÉ™cÉ™ bir oyuncaq deyil. O, bizim xatirÉ™mizdir, hÉ™r ÅŸeyi birgÉ™ seÃ§diyimizin, birgÉ™ baÅŸladÄ±ÄŸÄ±mÄ±zÄ±n simvoludur. MÉ™n onu indiyÉ™ qÉ™dÉ™r saxlayÄ±ram vÉ™ hÉ™r dÉ™fÉ™ baxanda o gÃ¼n hiss etdiyim o dolu-dolu sevgi hissi qayÄ±dÄ±r. BirlikdÉ™ yemÉ™k, birlikdÉ™ gÃ¼lmÉ™k â€“ xoÅŸbÉ™xtliy budu))." },
      { month: "2025-11", title: "4. evÄ± qayÄ±dÄ±ÅŸ((", image: "https://i.ibb.co/TBVkzMd8/Whats-App-mage-2025-12-08-at-12-33-16-2.jpg", text: "istemesemde uje eve qayidirdig mecbur idiy amma bu anda heccur yadimnan cixmir Qayidmag istemirdimmm(((" },
      { month: "2025-11", title: "5. BaÄŸlÄ±lÄ±q Hissi", image: "https://i.ibb.co/6cMm8XrT/Whats-App-mage-2025-12-08-at-12-45-17.jpg", text: "Bir-birimizÉ™ baÄŸlÄ± olduÄŸumuzu dÉ™rinlikdÉ™ hiss etdik, ilk opus ilk qucag yasadigimi ve Cox sevincliyem birinciyi sennen yasadigima" },
      { month: "2025-11", title: "6. Malldan DanÄ±ÅŸma DÃ¶nÉ™mi", image: "https://i.ibb.co/mV22GRNN/Whats-App-mage-2025-12-08-at-12-33-16-3.jpg", text: "Mallda gÉ™zib danÄ±ÅŸdÄ±ÄŸÄ±mÄ±z anlar var ha... HÉ™min anlarda sÉ™nin yanÄ±nda Ã¶zÃ¼mÃ¼ o qÉ™dÉ™r rahat hiss edirdim ki, sanki hÉ™yatÄ±m boyu sÉ™ni tanÄ±yÄ±rmÄ±ÅŸam. SÉ™n danÄ±ÅŸanda mÉ™n dinlÉ™yirdim, gÃ¼lÉ™ndÉ™ mÉ™n dÉ™ gÃ¼lÃ¼rdÃ¼m... MÉ™nim Ã¼Ã§Ã¼n É™n gÃ¶zÉ™l hiss o idi: sÉ™nin yanÄ±ndayam vÉ™ hÉ™r ÅŸey dÃ¼zdÃ¼r." },
      { month: "2025-11", title: "7. ÃœrÉ™klÉ™ri PaylaÅŸdÄ±ÄŸÄ±mÄ±z GÃ¼n", image: "https://i.ibb.co/JwGp7vvG/Whats-App-mage-2025-12-08-at-12-33-16-4.jpg", text: "Hemin ureylerimizi bir birimze elbe el verdiyimiz gÃ¼n)))ğŸ˜‚ burdada asiri xosbext idim cox eylenceli idi" },
      { month: "2025-11", title: "8. GÃ¶zlÉ™rdÉ™ki TÉ™bÉ™ssÃ¼m", image: "https://i.ibb.co/Zp2Fw4pt/Whats-App-mage-2025-12-08-at-12-33-17.jpg", text: "Burda uje ne desem azdi cunki hiss elediylerim o qeder coxdurkii uje onu heccur belli eleye bilmirem amma uzumdeki tebessume baxarag gozlerme baxarag ancag basa duse bilersen" },
      { month: "2025-11", title: "9. Ä°lk Lego Datemiz", image: "https://i.ibb.co/ksFZCHXZ/Whats-App-mage-2025-12-08-at-12-33-17-1.jpg", text: "Buda ilk lego bas basa datemiz cox romantikkkkkk coxx xosbextt cox gÃ¶zel gun idi bunnan oterefesi olsada hal hazirda yoxdu) Seni cox seviremm" },
      { month: "2025-11", title: "10. Sevgi Dolu BitiÅŸ", image: "https://i.ibb.co/bgv7Hc3W/Whats-App-mage-2025-12-08-at-12-33-17-2.jpg", text: "Bu gÃ¼nÉ™ qÉ™dÉ™r olanlarÄ±n É™n gÃ¶zÉ™l yekunu." }
   
      ,
     // âœ… Dekabr xatirÉ™lÉ™ri
{ month: "2025-12", title: "11. ÃœrÉ™yim dolu idi",  image: "https://i.ibb.co/DP20F81Z/Whats-App-mage-2025-12-31-at-21-14-44.jpg",  text: "Bu gÃ¼n mÉ™nim Ã¼Ã§Ã¼n Ã§ox xÃ¼susi idi. SÉ™n mÉ™nÉ™ hÉ™diyyÉ™lÉ™r almÄ±ÅŸdÄ±n. O an Ã¼rÉ™yim elÉ™ dolmuÅŸdu ki, sevinmÉ™kdÉ™n aÄŸlamaq istÉ™yirdim, amma Ã¶zÃ¼mÃ¼ gÃ¼clÉ™ saxladÄ±m. DaxilimdÉ™ min cÃ¼r duyÄŸu var idi. SÉ™ni nÉ™ qÉ™dÉ™r Ã§ox sevdiyimi, nÉ™ qÉ™dÉ™r dÉ™yÉ™rli olduÄŸunu bir daha hiss etdim. O hÉ™diyyÉ™lÉ™rdÉ™n Ã§ox, sÉ™nin bu dÃ¼ÅŸÃ¼ncÉ™n mÉ™nim Ã¼rÉ™yimi nemmee.." },
{ month: "2025-12", title: "12. ÅÉ™hÉ™rdÉ™ ikimiz",  image: "https://i.ibb.co/x8H2Xp9P/Whats-App-mage-2026-01-01-at-01-52-04.jpg",  text: "Bu gÃ¼n birlikdÉ™ ÅŸÉ™hÉ™rÉ™ Ã§Ä±xdÄ±q. Bir neÃ§É™ yerdÉ™ gÉ™zdik, sonra bir yerdÉ™ oturub yemÉ™k yedik. SadÉ™ gÃ¶rÃ¼nÉ™n bu anlar mÉ™nim Ã¼Ã§Ã¼n inanÄ±lmaz xoÅŸ idi. SÉ™ninlÉ™ yan-yana oturub gÃ¼lmÉ™k, danÄ±ÅŸmaq, vaxtÄ±n necÉ™ keÃ§diyini hiss etmÉ™mÉ™kâ€¦ o gÃ¼nÃ¼n hÉ™r saniyÉ™si yaddaÅŸÄ±ma bir baÅŸa yazÄ±ldÄ±..." },
{ month: "2025-12", title: "13. Lego date",  image: "https://i.ibb.co/0p5P7q9L/Blank-Collage-Template.jpg"             ,  text: "sonra antikafeyÉ™ getdiy. Orda lego date etdik, Ã§ox uzun-uzadÄ± sÃ¶hbÉ™t etdik. O qÉ™dÉ™r rahat vÉ™ xoÅŸbÉ™xt idim ki, sanki dÃ¼nya bir anlÄ±q dayanmÄ±ÅŸdÄ±. HÉ™r ÅŸey Ã§ox sÉ™mimi, Ã§ox tÉ™miz idi. O anlarda sÉ™ninlÉ™ olduÄŸuma gÃ¶rÉ™ Ã¶zÃ¼mÃ¼ Ã§ox ÅŸanslÄ± hiss edirdimmm." },
{ month: "2025-12", title: "14. SahilÉ™ doÄŸru",  image: "https://i.ibb.co/7Jc10PdG/Whats-App-mage-2025-12-31-at-21-14-42-2.jpg",  text: "AntikafedÉ™n Ã§Ä±xandan sonra sahilÉ™ doÄŸru getdik, uzun mÃ¼ddÉ™t gÉ™zdik. Orda bir daydaya yaxÄ±nlaÅŸÄ±b bizdÉ™n ÅŸÉ™kil Ã§É™kmÉ™sini xahiÅŸ etdim. Bu mÉ™nim Ã¼Ã§Ã¼n bÃ¶yÃ¼k bir cÉ™sarÉ™t idi. ÅÉ™hÉ™rÉ™ gedÉ™nÉ™ qÉ™dÉ™r yolboyu Ã§ox romantik, unudulmaz anlar yaÅŸadÄ±ÄŸ OHMM. Ã§ox xoÅŸbext idimmm.." },
{ month: "2025-12", title: "15. ...",  image: "https://i.ibb.co/RncXbft/Whats-App-mage-2025-12-31-at-21-14-42-3.jpg",  text: "Burda biraz BÄ°RAZZCk cox pis idin yeni sadece aglamag esebivi birseylerden cixartmag isteyirdin elimnen geldiyi qeder motivasya versemde bu duyguya qarsi gelmey cetin idi amma gorduyun kimi ureyivin temizliyi belli oldu istediyinde oldu tez bir zamanda getdi atan. Uzuvun gulusue qurbaaan Men daha cox sevinmisdimki sen en azinna vurgulamirdin ve Gulurdun." },
{ month: "2025-12", title: "16. ğŸ ",  image: "https://i.ibb.co/Df35qTDm/Whats-App-mage-2025-12-31-at-21-14-42.jpg",  text: "Bu gÃ¼n bizim evdÉ™ idiy. HÉ™qiqÉ™tÉ™n Ã§ox ÅŸeyin ilk dÉ™fÉ™ olduÄŸu bir gÃ¼n idi. Bir az hÉ™yÉ™can, bir az utancaqlÄ±q, amma Ã§oxlu gÃ¼lÃ¼ÅŸ vÉ™ sÉ™mimi anlarâ€¦ DÃ¼ÅŸÃ¼nÃ¼rÉ™m ki, bu hisslÉ™r ikimiz Ã¼Ã§Ã¼n dÉ™ KeÃ§É™rli Ã§ox xÃ¼susi vÉ™ unudulmaz idi." },
{ month: "2025-12", title: "17. ğŸˆ",  image: "https://i.ibb.co/k6HGgzxX/Whats-App-mage-2025-12-31-at-21-14-42-4.jpg",  text: "Bu gÃ¼nde biraz Ã§ox aÄŸlamÅŸÄ±ÅŸ ola bilersen. Onun itmÉ™si tÉ™xminÉ™n bir il idi, amma bu xatirÉ™ hÉ™lÉ™ dÉ™ iÃ§imi bir az kÉ™dÉ™rlÉ™ndirir. Limona oxÅŸatsanda Yerini vermeyeceydi amma cox isterdim goturey amma ananda haqli idi cunki bit ve kuce pisiyi idi ne qeder limona oxsasada." },
{ month: "2025-12", title: "18. Mini Pizza DATEEEE",  image: "https://i.ibb.co/7dpS0rxz/Blank-Collage-Template.png",  text: "Bu gÃ¼n pizza date etdik. GecÉ™ vaxtÄ± birlikdÉ™ gÉ™zÉ™rÉ™k pizza yemÉ™yÉ™ getdik. KÃ¼Ã§É™lÉ™r, soyuq hava, sÉ™ninlÉ™ yan-yana yerimÉ™k vÉ™ pizzanÄ±n dadÄ±â€¦ hÉ™r ÅŸey birlÉ™ÅŸib Ã§ox isti, Ã§ox ÅŸirin bir xatirÉ™yÉ™ Ã§evrildi." },
{ month: "2025-12", title: "19. Ã–zÉ™l anÄ±lardan biri",  image: "https://i.ibb.co/7tM8GB0c/Whats-App-mage-2025-12-31-at-21-14-44-8.jpg",  text: "Bu gÃ¼n dÉ™hÅŸÉ™t Ã§ox gÃ¼lmÃ¼ÅŸdÃ¼k. HÉ™qiqÉ™tÉ™n Ã§ox É™ylÉ™nmiÅŸdik. SÉ™n bu gÃ¼nÃ¼ É™n É™ylÉ™ncÉ™li gÃ¼nlÉ™rimizdÉ™n biri kimi sayÄ±rdÄ±n vÉ™ Ã§ox haqlÄ± idin. GÃ¼lmÉ™kdÉ™n qarnÄ±mÄ±z aÄŸrÄ±yÄ±rdÄ±, zamanÄ±n necÉ™ keÃ§diyini belÉ™ hiss etmÉ™dik. Bu qÉ™dÉ™r saf gÃ¼lÃ¼ÅŸ, bu qÉ™dÉ™r xoÅŸ anâ€¦ menim Ã¼Ã§Ã¼n Ã§ox dÉ™yÉ™rlidir." },
{ month: "2025-12", title: "20. Telefon seÃ§imiğŸ¤£", image: "https://i.ibb.co/9Hv0PFgC/Whats-App-mage-2025-12-31-at-21-14-41.jpg", text: "Bu gÃ¼n sÉ™n hazÄ±rlÄ±qdan Ã§Ä±xÄ±b birbaÅŸa yanÄ±mÄ±za gÉ™lmiÅŸdin. Sonra anamla birlikdÉ™ mÉ™n, sÉ™n vÉ™ anam babama telefon seÃ§irdik. O qÉ™dÉ™r É™ylÉ™nmiÅŸdik ki, sanki bir ailÉ™ kimi idiy. Anamla sÉ™nin bu qÉ™dÉ™r yaxÅŸÄ± anlaÅŸmaÄŸÄ±n, birlikdÉ™ gÃ¼lmÉ™yimiz, hÉ™r ÅŸey Ã§ox xoÅŸ, Ã§ox isti bir gÃ¼nÉ™ Ã§evrilmiÅŸdi. Bu gÃ¼nÃ¼ hÉ™miÅŸÉ™ gÃ¼lÃ¼msÉ™yÉ™rÉ™k xatÄ±rlayacam." },
{ month: "2025-12", title: "21. Ã–hmm", image: "https://i.ibb.co/9HPs6mQV/Whats-App-mage-2025-12-31-at-21-14-41-1.jpg", text: "27 Dekabr 14:27 SusmuÅŸtunn...." },
    ];

    const modal = document.getElementById('memoryModal');
    const modalTitle = document.getElementById('modal-title');
    const modalText = document.getElementById('modal-text');
    const modalIndex = document.getElementById('modal-index');
    const closeModal = document.querySelector('.close-btn');
    const prevBtn = document.getElementById('prev-memory');
    const nextBtn = document.getElementById('next-memory');

    const memorySelect = document.getElementById('memory-select');

    const monthChip = document.getElementById('month-chip');
    const monthChipText = document.getElementById('month-chip-text');
    const monthChipSub = document.getElementById('month-chip-sub');

    const monthSheet = document.getElementById('monthSheet');
    const monthGrid = document.getElementById('monthGrid');
    const monthCloseBtn = document.getElementById('monthCloseBtn');

    let activeMonthKey = localStorage.getItem('memoriesActiveMonth') || 'all';
    let activeMemoryId = ''; // memory-select value (month list local index)

    let visibleIndices = []; // global indices of memoryData currently visible
    let currentVisiblePos = 0;

    const themes = {
      pink:  { accent:'#ff4d9d', bg0:'#070A12', bg1:'#0B1022', cardA:'rgba(255,255,255,.10)', cardB:'rgba(255,255,255,.06)', stroke:'rgba(255,255,255,.12)', stroke2:'rgba(255,255,255,.18)', meshA:'rgba(255,77,157,.22)', meshB:'rgba(61,123,253,.18)', meshC:'rgba(47,191,113,.16)', meshD:'rgba(255,214,10,.10)' },
      blue:  { accent:'#3d7bfd', bg0:'#070A12', bg1:'#0B1022', cardA:'rgba(255,255,255,.10)', cardB:'rgba(255,255,255,.06)', stroke:'rgba(255,255,255,.12)', stroke2:'rgba(255,255,255,.18)', meshA:'rgba(61,123,253,.22)', meshB:'rgba(255,77,157,.16)', meshC:'rgba(50,173,230,.16)', meshD:'rgba(255,214,10,.08)' },
      green: { accent:'#2fbf71', bg0:'#070A12', bg1:'#0B1022', cardA:'rgba(255,255,255,.10)', cardB:'rgba(255,255,255,.06)', stroke:'rgba(255,255,255,.12)', stroke2:'rgba(255,255,255,.18)', meshA:'rgba(47,191,113,.22)', meshB:'rgba(61,123,253,.14)', meshC:'rgba(255,77,157,.12)', meshD:'rgba(255,214,10,.10)' },
      night: { accent:'#ffb6c1', bg0:'#040513', bg1:'#02020a', cardA:'rgba(255,255,255,.09)', cardB:'rgba(255,255,255,.05)', stroke:'rgba(255,255,255,.12)', stroke2:'rgba(255,255,255,.18)', meshA:'rgba(255,182,193,.18)', meshB:'rgba(100,120,255,.14)', meshC:'rgba(47,191,113,.10)', meshD:'rgba(255,214,10,.08)' },
    };

    let toastTimer = null;
    function showToast(text){
      const t = document.getElementById('toast');
      if(!t) return;
      t.textContent = text;
      t.classList.add('show');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => t.classList.remove('show'), 1400);
    }

    function setTheme(name){
      const t = themes[name];
      if(!t) return;
      const root = document.documentElement;

      root.style.setProperty('--accent', t.accent);
      root.style.setProperty('--bg0', t.bg0);
      root.style.setProperty('--bg1', t.bg1);
      root.style.setProperty('--cardA', t.cardA);
      root.style.setProperty('--cardB', t.cardB);
      root.style.setProperty('--stroke', t.stroke);
      root.style.setProperty('--stroke2', t.stroke2);
      root.style.setProperty('--meshA', t.meshA);
      root.style.setProperty('--meshB', t.meshB);
      root.style.setProperty('--meshC', t.meshC);
      root.style.setProperty('--meshD', t.meshD);

      document.querySelectorAll('.theme-switcher button').forEach(b => b.classList.remove('active'));
      const activeBtn = document.getElementById(`theme-${name}`);
      if(activeBtn) activeBtn.classList.add('active');

      localStorage.setItem('websiteTheme', name);
      showToast(`ğŸ¨ Tema dÉ™yiÅŸdi: ${name}`);
    }

    function applySavedTheme(){
      const savedTheme = localStorage.getItem('websiteTheme') || 'pink';
      setTheme(savedTheme);
    }

    function bindThemeButtons(){
      document.querySelectorAll('.theme-switcher button').forEach(btn => {
        btn.addEventListener('click', () => {
          const name = btn.getAttribute('data-theme');
          if(name) setTheme(name);
        });
      });
    }

    function updateLoveCounter() {
      const now = new Date();
      const diff = now - startDate;
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const months = Math.floor(days / 30);
      const years = Math.floor(months / 12);
      const remainingMonths = months % 12;
      const remainingDays = days % 30;

      const timerEl = document.getElementById("countdown-timer");
      timerEl.textContent = `${years} il ${remainingMonths} ay ${remainingDays} gÃ¼n`;
    }
    setInterval(updateLoveCounter, 1000);
    updateLoveCounter();

    function getMonthLabel(key){
      const m = monthSections.find(x => x.key === key);
      return m ? m.label : "HamÄ±sÄ±";
    }

    function countForMonth(key){
      if(key === "all") return memoryData.length;
      return memoryData.filter(m => (m.month || "all") === key).length;
    }

    function computeVisibleIndices(){
      let indices = memoryData.map((_, i) => i);

      if(activeMonthKey !== "all"){
        indices = indices.filter(i => (memoryData[i].month || "all") === activeMonthKey);
      }

      if(activeMemoryId !== ""){
        const pos = Number(activeMemoryId);
        if(Number.isFinite(pos) && pos >= 0 && pos < indices.length){
          indices = [indices[pos]];
        }
      }

      return indices;
    }

    function loadMemories() {
      const list = document.getElementById('memories-list');
      list.innerHTML = '';

      visibleIndices = computeVisibleIndices();

      visibleIndices.forEach((globalIndex, localIndex) => {
        const memory = memoryData[globalIndex];

        const card = document.createElement('div');
        card.className = 'card reveal';
        card.id = `memory-card-${globalIndex}`;

        const img = document.createElement('img');
        img.src = memory.image;
        img.alt = memory.title;
        img.loading = 'lazy';
        img.decoding = 'async';

        const overlay = document.createElement('div');
        overlay.className = 'overlay';
        overlay.textContent = 'HekayÉ™ni oxu â†’';

        const body = document.createElement('div');
        body.className = 'card-body';

        const title = document.createElement('h2');
        title.textContent = memory.title;

        const small = document.createElement('small');
        small.textContent = 'ÃœrÉ™yimdÉ™ xÃ¼susi yeri olan gÃ¼n ğŸ’Œ';

        body.appendChild(title);
        body.appendChild(small);

        card.appendChild(img);
        card.appendChild(overlay);
        card.appendChild(body);

        card.addEventListener('click', () => openModalByVisiblePos(localIndex));
        list.appendChild(card);
      });

      document.getElementById('memory-count').textContent = visibleIndices.length;
    }

    function populateMemorySelect() {
      const monthList = (activeMonthKey === "all")
        ? memoryData.map((_, i) => i)
        : memoryData.map((_, i) => i).filter(i => (memoryData[i].month || "all") === activeMonthKey);

      memorySelect.innerHTML = '<option value="">HamÄ±sÄ±nÄ± gÃ¶stÉ™r</option>';

      monthList.forEach((globalIndex, localIndex) => {
        const m = memoryData[globalIndex];
        const opt = document.createElement('option');
        opt.value = String(localIndex);
        opt.textContent = m.title;
        memorySelect.appendChild(opt);
      });

      memorySelect.value = activeMemoryId;

      memorySelect.onchange = (e) => {
        activeMemoryId = e.target.value;
        refreshAll();

        if(activeMemoryId !== ""){
          const idxLocal = Number(activeMemoryId);
          const globalIdx = monthList[idxLocal];
          const el = document.getElementById(`memory-card-${globalIdx}`);
          if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      };
    }

    function openModalByVisiblePos(visiblePos){
      if(!visibleIndices.length) return;

      currentVisiblePos = Math.max(0, Math.min(visibleIndices.length - 1, visiblePos));
      const globalIndex = visibleIndices[currentVisiblePos];
      const mem = memoryData[globalIndex];

      modalTitle.textContent = mem.title;
      modalText.textContent = mem.text;
      modalIndex.textContent = `${currentVisiblePos + 1} / ${visibleIndices.length}`;
      modal.style.display = 'block';
    }

    function closeModalFn() { modal.style.display = 'none'; }

    function initReveal(){
      const els = Array.from(document.querySelectorAll('.reveal'));
      if(!('IntersectionObserver' in window)) {
        els.forEach(el => el.classList.add('show'));
        return;
      }
      const io = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if(entry.isIntersecting) {
            entry.target.classList.add('show');
            io.unobserve(entry.target);
          }
        });
      }, { threshold: 0.12 });

      els.forEach(el => io.observe(el));
    }

    function initScrollProgress(){
      const bar = document.getElementById('scrollBar');
      if(!bar) return;

      const onScroll = () => {
        const doc = document.documentElement;
        const scrollTop = doc.scrollTop || document.body.scrollTop;
        const height = (doc.scrollHeight - doc.clientHeight) || 1;
        const pct = Math.min(100, Math.max(0, (scrollTop / height) * 100));
        bar.style.width = pct.toFixed(2) + '%';
      };
      window.addEventListener('scroll', onScroll, { passive: true });
      onScroll();
    }

    function refreshAll(){
      // chip update
      const label = getMonthLabel(activeMonthKey);
      monthChipText.textContent = label;
      monthChipSub.textContent = (activeMonthKey === "all")
        ? `${memoryData.length} xatirÉ™ â€¢ hamÄ±sÄ±`
        : `${countForMonth(activeMonthKey)} xatirÉ™ â€¢ bu ay`;

      loadMemories();
      populateMemorySelect();
      initReveal();
    }

    /* âœ… Month Sheet build + open/close */
    function parseMonthNumber(label){
      // "1-ci ay â€” Noyabr" -> 1
      const m = label.match(/^(\d+)\-/) || label.match(/^(\d+)\s*ci/) || label.match(/^(\d+)/);
      return m ? m[1] : "";
    }

    function buildMonthGrid(){
      monthGrid.innerHTML = "";

      monthSections.forEach(section => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "month-card";
        if(section.key === activeMonthKey) btn.classList.add("active");

        const monthNo = (section.key === "all") ? "âˆ" : (parseMonthNumber(section.label) || "â€¢");
        const cnt = countForMonth(section.key);

        btn.innerHTML = `
          <div class="month-top">
            <div class="badge">${monthNo}</div>
            <div class="month-meta"><span class="dot"></span> ${cnt} xatirÉ™</div>
          </div>
          <div class="month-name">${section.label}</div>
          <div class="month-meta" style="margin-top:8px;">
            ${section.key === "all" ? "BÃ¼tÃ¼n aylar" : "Bu bÃ¶lmÉ™ni aÃ§"}
          </div>
        `;

        btn.addEventListener("click", () => {
          activeMonthKey = section.key;
          localStorage.setItem("memoriesActiveMonth", activeMonthKey);

          // ay dÉ™yiÅŸÉ™ndÉ™ xatirÉ™ seÃ§imi sÄ±fÄ±rlansÄ±n
          activeMemoryId = "";
          memorySelect.value = "";

          closeMonthSheet();
          refreshAll();
          showToast(`ğŸ“… BÃ¶lmÉ™: ${section.label}`);
        });

        monthGrid.appendChild(btn);
      });
    }

    function openMonthSheet(){
      buildMonthGrid();
      monthSheet.classList.add("show");
      monthSheet.setAttribute("aria-hidden","false");
      document.body.style.overflow = "hidden";
    }
    function closeMonthSheet(){
      monthSheet.classList.remove("show");
      monthSheet.setAttribute("aria-hidden","true");
      document.body.style.overflow = "";
    }

    monthChip.addEventListener("click", openMonthSheet);
    monthCloseBtn.addEventListener("click", closeMonthSheet);
    monthSheet.addEventListener("click", (e) => {
      if(e.target === monthSheet) closeMonthSheet();
    });

    /* Modal events */
    closeModal.onclick = closeModalFn;
    window.onclick = (e) => { if (e.target === modal) closeModalFn(); };

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModalFn();
        closeMonthSheet();
      }
    });

    prevBtn.onclick = () => {
      if(!visibleIndices.length) return;
      openModalByVisiblePos((currentVisiblePos - 1 + visibleIndices.length) % visibleIndices.length);
    };
    nextBtn.onclick = () => {
      if(!visibleIndices.length) return;
      openModalByVisiblePos((currentVisiblePos + 1) % visibleIndices.length);
    };

    /* Init */
    document.addEventListener('DOMContentLoaded', () => {
      applySavedTheme();
      bindThemeButtons();

      

      initSpecialStack();
// validate stored month
      if(!monthSections.some(x => x.key === activeMonthKey)) activeMonthKey = "all";

      refreshAll();
      initScrollProgress();
    });
  </script>
</body>
</html>
